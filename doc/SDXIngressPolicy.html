<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1504.83">
  <style type="text/css">
    p.p2 {margin: 0.0px 0.0px 0.0px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #000000; -webkit-text-stroke: #000000}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #000000; -webkit-text-stroke: #000000}
    p.p7 {margin: 0.0px 0.0px 0.0px 48.0px; line-height: 20.0px; font: 14.7px 'Courier New'; color: #000000; -webkit-text-stroke: #000000}
    li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 20.0px; font: 14.7px Arial; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {-webkit-text-stroke: 0px #000000}
    span.s3 {font: 14.7px 'Courier New'; font-kerning: none}
    ul.ul1 {list-style-type: disc}
  </style>
</head>
<body>
<h5 style="margin: 0.0px 0.0px 5.3px 0.0px; line-height: 20.0px; font: 14.7px 'Courier New'; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>POST /api/v1/policies/type/SDX&lt;In|E&gt;gress</b></span></h5>
<p class="p2"><span class="s1">Create a new L2 SDX policy. Both SDX Ingress and SDX Egress rules have the same format. They may have different rule availability, which will be listed below.</span></p>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>Request JSON Object</i></span></h6>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">starttime (<i>string</i>) - Start time of the SDX Rule. String should be in RFC3339 format: </span><span class="s3">"2017-04-12T23:20:50"</span><span class="s1"><br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">endtime (<i>string</i>) - End time of the SDX Rule. String should be in RFC3339 format: </span><span class="s3">"2017-04-12T23:20:50"<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">switch (<i>string</i>) - Name of endpoint switch. See the  <i>/api/v1/localcontrollers/&lt;lcname&gt;/switches/</i> endpoint for switch names.<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">matches (<i>list</i>) - List of SDXMatches (described below).<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">actions (<i>list</i>) - List of SDXActions (described below).<br>
</span></li>
</ul>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>SDXMatch</i></span></h6>
<p class="p2"><span class="s1">The SDX Matches are fairly straight forward: they are simple values. Each type has different limitations, but they match the OpenFlow 1.3 spec's restrictions.</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">Egress Policies can use the following SDXMatches:</span></p>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1"> 'src_mac', 'src_ip', 'tcp_src', 'udp_src', 'dst_mac', 'dst_ip', 'tcp_dst', 'udp_dst', 'ip_proto', 'eth_type', 'vlan'<br>
</span></li>
</ul>
<p class="p6"><span class="s1">Ingress Policies can use the following SDXMatches:</span></p>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">'src_mac', 'src_ip', 'tcp_src', 'udp_src', 'dst_mac', 'dst_ip', 'tcp_dst', 'udp_dst', 'ip_proto', 'eth_type', 'vlan'<br>
</span></li>
</ul>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>SDXAction</i></span></h6>
<p class="p2"><span class="s1">The SDX Matches are very similar to SDXMatches. The "ModifyXXX" types take a value, but the other types of rules <i>do not</i> take values, as they do not apply.</span></p>
<p class="p5"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">Egress Policies can use the following SDXActions:</span></p>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">'ModifySRCMAC', 'ModifySRCIP', 'ModifyTCPSRC', 'ModifyUDPSRC', 'ModifyVLAN', 'Drop', 'Continue']<br>
</span></li>
</ul>
<p class="p6"><span class="s1">Ingress Policies can use the following SDXActions:</span></p>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">'ModifyDSTMAC', 'ModifyDSTIP', 'ModifyTCPDST', 'ModifyUDPDST', 'ModifyVLAN', 'Drop', 'Continue'<br>
</span></li>
</ul>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>Response JSON Object</i></span></h6>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">policy (<i>dict</i>) - Link to the newly created policy<br>
</span></li>
</ul>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>Status Codes</i></span></h6>
<ul class="ul1">
  <li class="li4"><span class="s2"></span><span class="s1">201 Created - Policy successfully created<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">400 Bad Request - Invalid Argument<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">401 Unauthorized - Returned if a user is not able to use a particular policy type or particular resource that this policy requires<br>
</span></li>
  <li class="li4"><span class="s2"></span><span class="s1">404 Not Found - Returned if a resource does not exist that is being requested.<br>
</span></li>
</ul>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>Example Request</i></span></h6>
<p class="p7"><span class="s1">POST /api/v1/policies/type/sdxingress</span></p>
<p class="p7"><span class="s1">{</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "starttime":"1985-04-12T23:20:50",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "endtime":"1985-04-12T23:20:50+0400",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "switch":"mia-switch",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "matches": [ {"srcport":6},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>              {"dstip":"1.2.3.4"} ],</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "actions": [ {"ModifyDSTIP":"1.2.3.5"},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>              {"Continue"} ]</span></p>
<p class="p7"><span class="s1">}</span></p>
<p class="p5"><span class="s1"></span><br></p>
<h6 style="margin: 0.0px 0.0px 5.3px 48.0px; line-height: 20.0px; font: 14.7px Arial; color: #666666; -webkit-text-stroke: #666666"><span class="s1"><i>Example Response</i></span></h6>
<p class="p7"><span class="s1">HTTP/1.1 201 Created</span></p>
<p class="p7"><span class="s1">Content-Type: application/json</span></p>
<p class="p7"><span class="s1">{</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> "policy": {</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   "href": "http://awavesdx/api/v1/policy/number/5",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   "policynumber": 5,</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   "user":"sdonovan",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   "type":"sdxingress",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   "json":"{</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>     "sdxingress":{</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>       "starttime":"1985-04-12T23:20:50",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>       "endtime":"1985-04-12T23:20:50+0400",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>       "switch":"mia-switch",</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>       "matches": [ {"srcport":6},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>                    {"dstip":"1.2.3.4"} ],</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>       "actions": [ {"ModifyDSTIP":"1.2.3.5"},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>                    {"Continue"} ]</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>     }</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span>   }</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space"> </span> }</span></p>
</body>
</html>
